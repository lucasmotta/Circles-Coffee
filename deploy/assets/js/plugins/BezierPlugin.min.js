/*!
 * VERSION: beta 1.02
 * DATE: 2012-07-17
 * JavaScript (also available in AS3 and AS2)
 * UPDATES AND DOCS AT: http://www.greensock.com
 *
 * Copyright (c) 2008-2012, GreenSock. All rights reserved. 
 * This work is subject to the terms in http://www.greensock.com/terms_of_use.html or for 
 * corporate Club GreenSock members, the software agreement that was issued with the corporate 
 * membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */
(window._gsQueue||(window._gsQueue=[])).push(function(){_gsDefine("plugins.BezierPlugin",["plugins.TweenPlugin"],function(C){var x=function(){C.call(this,"bezier",-1);this._overwriteProps.pop();this._func={};this._round={}},z=x.prototype=new C("bezier",1),G=180/Math.PI,y=[],A=[],D=[],E,B=function(a,c,h,j){this.a=a;this.b=c;this.c=h;this.d=j;this.da=j-a;this.ca=h-a;this.ba=c-a},H=x.bezierThrough=function(a,c,h,j,m){var b={},d=[],f,e,j="string"===typeof j?","+j+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,"; null==c&&(c=1);for(e in a[0])d.push(e);y.length=A.length=D.length=0;f=d.length;for(E=0;-1<--f;){e=d[f];var i=b,l=e,n=a,s=e;e=-1!==j.indexOf(","+e+",");var q=m,p=[],g=void 0,k=void 0,o=void 0,r=void 0,t=void 0,g=o=void 0;if(q){n=[q].concat(n);for(k=n.length;-1<--k;)if("string"===typeof(g=n[k][s]))"="===g.charAt(1)&&(n[k][s]=q[s]+Number(g.charAt(0)+g.substr(2)))}g=n.length-2;for(k=0;k<g;k++)o=n[k][s],r=n[k+1][s],p[k]=new B(o,0,0,r),t=n[k+2][s],e&&(o=r>o?r-o:o-r,y[k]=(y[k]||0)+o,A[k]=(A[k]||0)+o+(t> r?t-r:r-t));p[k]=new B(n[k][s],0,0,n[k+1][s]);i[l]=p}for(f=d.length;-1<--f;)if(e=d[f],-1!==j.indexOf(","+e+",")){E++;a=b[e];m=a.length-1;l=l=i=void 0;for(i=0;i<m;i++)l=a[i],l=(a[i+1].d-l.d)/(A[i]-y[i])+(l.d-l.a)/y[i],0===l&&(l=0.01),D[i]=(D[i]||0)+(0<l?l:-l)}for(f=d.length;-1<--f;){e=d[f];a=b[e];m=c;i=h;l=-1!==j.indexOf(","+e+",");n=a.length-1;s=0;e=a[0].a;for(var u=o=p=r=o=t=r=g=t=k=p=q=void 0,w=void 0,v=void 0,q=0;q<n;q++)g=a[s],p=g.a,k=g.d,t=a[s+1].d,l?(o=y[q],u=A[q],v=u/E*m/D[q]):(o=k>p?k-p:p- k,u=o+(t>k?t-k:k-t),v=0.5*u*m),o===u&&(o=0.5,u=1),w=(o/u+2)/5,r=k-(k-p)*v/o*w,t=k+(t-k)*v/(u-o)*(1-w),o=k-(r+(t-r)*(3*o/u+0.5)/4),g.c=r+=o,g.b=0!==q?e:e=g.a+0.6*(g.c-g.a),g.da=k-p,g.ca=r-p,g.ba=e-p,i?(p=F(p,e,r,k),a.splice(s,1,p[0],p[1],p[2],p[3]),s+=4):s++,e=t+o;g=a[s];g.b=e;g.c=e+0.4*(g.d-e);g.da=g.d-g.a;g.ca=g.c-g.a;g.ba=e-g.a;i&&(p=F(g.a,e,g.c,g.d),a.splice(s,1,p[0],p[1],p[2],p[3]))}return b},F=x.cubicToQuadratic=function(a,c,h,j){var m={a:a},b={},d={},f={c:j},e=(a+c)/2,i=(c+h)/2,h=(h+j)/2,c= (e+i)/2,i=(i+h)/2,l=(i-c)/8;m.b=e+(a-e)/4;b.b=c+l;m.c=b.a=(m.b+b.b)/2;b.c=d.a=(c+i)/2;d.b=i-l;f.b=h+(j-h)/4;d.c=f.a=(d.b+f.b)/2;return[m,b,d,f]};x.quadraticToCubic=function(a,c,h){return new B(a,(2*c+a)/3,(2*c+h)/3,h)};z.constructor=x;x.API=2;z._onInitTween=function(a,c,h){this._target=a;c instanceof Array&&(c={values:c});this._props=[];this._timeRes=null==c.timeResolution?6:parseInt(c.timeResolution);var j=c.values||[],m={},b=j[0],h=c.autoRotate||h.vars.orientToBezier,d,f;this._autoRotate=h?h instanceof Array?h:[["x","y","rotation",0]]:null;for(d in b)this._props.push(d);for(b=this._props.length;-1<--b;)d=this._props[b],this._overwriteProps.push(d),h=this._func[d]="function"===typeof a[d],m[d]=!h?parseFloat(a[d]):a[d.indexOf("set")||"function"!==typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]();if("cubic"!==c.type&&"quadratic"!==c.type&&"soft"!==c.type)m=H(j,isNaN(c.curviness)?1:c.curviness,!1,c.correlate,m);else{var b=(b=c.type)||"soft",c={},h="cubic"===b?3:2,b="soft"===b,e=[],i,l,n,s,q,p,g,k, o;b&&m&&(j=[m].concat(j));if(null==j||3>j.length)throw"invalid Bezier data";for(l in j[0])e.push(l);for(p=e.length;-1<--p;){l=e[p];c[l]=q=[];o=0;k=j.length;for(g=0;g<k;g++)i=null==m?j[g][l]:"string"===typeof(n=j[g][l])&&"="===n.charAt(1)?m[l]+Number(n.charAt(0)+n.substr(2)):Number(n),b&&1<g&&g<k-1&&(q[o++]=(i+q[o-2])/2),q[o++]=i;k=o-h+1;for(g=o=0;g<k;g+=h)i=q[g],l=q[g+1],n=q[g+2],s=2===h?0:q[g+3],q[o++]=n=3===h?new B(i,l,n,s):new B(i,(2*l+i)/3,(2*l+n)/3,n);q.length=o}m=c}this._beziers=m;this._segCount= this._beziers[d].length;if(this._timeRes){e=this._beziers;d=this._timeRes;d=d>>0||6;m=[];l=[];j=n=0;c=d-1;h=[];b=[];for(f in e){i=e[f];q=m;p=d;g=1/p;k=i.length;for(var r=void 0,t=void 0,u=s=o=t=void 0,w=r=void 0,v=void 0,v=u=void 0;-1<--k;){u=i[k];t=u.a;o=u.d-t;s=u.c-t;u=u.b-t;t=0;for(w=1;w<=p;w++)r=g*w,v=1-r,r=t-(t=(r*r*o+3*v*(r*s+v*u))*r),v=k*p+w-1,q[v]=(q[v]||0)+r*r}}e=m.length;for(f=0;f<e;f++)n+=Math.sqrt(m[f]),i=f%d,b[i]=n,i===c&&(j+=n,i=f/d>>0,h[i]=b,l[i]=j,n=0,b=[]);this._length=j;this._lengths= l;this._segments=h;this._l1=this._li=this._s1=this._si=0;this._l2=this._lengths[0];this._curSeg=this._segments[0];this._s2=this._curSeg[0];this._prec=1/this._curSeg.length}if(h=this._autoRotate){h[0]instanceof Array||(this._autoRotate=h=[h]);for(b=h.length;-1<--b;)for(f=0;3>f;f++)d=h[b][f],this._func[d]="function"===typeof a[d]?a[d.indexOf("set")||"function"!==typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]:!1}return!0};z.setRatio=function(a){var c=this._segCount,h=this._func,j=this._target,m,b, d,f,e;if(this._timeRes){m=this._lengths;f=this._curSeg;a*=this._length;b=this._li;if(a>this._l2){for(c-=1;b<c&&(this._l2=m[++b])<=a;);this._l1=m[b-1];this._li=b;this._curSeg=f=this._segments[b];this._s2=f[this._s1=this._si=0]}else if(a<this._l1){for(;0<b&&(this._l2=m[--b])>=a;);this._l1=0===b?0:m[b-1];this._li=b;this._curSeg=this._segments[b];this._s1=f[this._si=f.length-1];this._s2=m[b]}m=b;a-=this._l1;b=this._si;if(a>this._s2){for(c=f.length-1;b<c&&(this._s2=f[++b])<=a;);this._s1=f[b-1];this._si= b}else if(a<this._s1){for(;0<b&&(this._s2=f[--b])>=a;);this._s1=0===b?0:f[b-1];this._si=b}f=(b+(a-this._s1)/(this._s2-this._s1))*this._prec}else m=0>a?0:1<=a?c-1:c*a>>0,f=(a-m*(1/c))*c;c=1-f;for(b=this._props.length;-1<--b;)if(a=this._props[b],d=this._beziers[a][m],e=(f*f*d.da+3*c*(f*d.ca+c*d.ba))*f+d.a,this._round[a]&&(e=e+(0<e?0.5:-0.5)>>0),h[a])j[a](e);else j[a]=e;if(this._autoRotate){var c=this._autoRotate,i,l,n,s,q;for(b=c.length;-1<--b;)a=c[b][2],s=c[b][3]||0,q=!0==c[b][4]?1:G,d=this._beziers[c[b][0]][m], e=this._beziers[c[b][1]][m],i=d.a+(d.b-d.a)*f,l=d.b+(d.c-d.b)*f,i+=(l-i)*f,l+=(d.c+(d.d-d.c)*f-l)*f,d=e.a+(e.b-e.a)*f,n=e.b+(e.c-e.b)*f,d+=(n-d)*f,n+=(e.c+(e.d-e.c)*f-n)*f,e=Math.atan2(n-d,l-i)*q+s,h[a]?h[a].call(j,e):j[a]=e}};z._roundProps=function(a,c){for(var h=this._overwriteProps,j=h.length;-1<--j;)if(a[h[j]]||a.bezier||a.bezierThrough)this._round[h[j]]=c};z._kill=function(a){var c=this._props,h,j;for(h in _beziers)if(h in a){delete this._beziers[h];delete this._func[h];for(j=c.length;-1<--j;)c[j]=== h&&c.splice(j,1)}return C.prototype._kill.call(this,a)};C.activate([x]);return x},!0)});window._gsDefine&&_gsQueue.pop()();